### `API_KEY_AUTH_FEATURE.md`

# 기능명: API Key 인증 및 자동 헤더 삽입 모듈

## 1. 기능 개요

사용자가 별도의 회원가입 없이 자신의 API 키를 웹사이트에 입력하여 서비스를 이용할 수 있도록 하는 기능입니다. 입력된 API 키는 브라우저의 로컬 저장소(localStorage)에 안전하게 저장되며, 모든 API 요청 시 자동으로 `x-api-key` 헤더에 삽입됩니다.

## 2. 주요 동작 방식

1.  **UI 상태**: 웹사이트 헤더에 **자물쇠 아이콘(🔒)**이 표시됩니다.
2.  **모달 활성화**: 사용자가 자물쇠 아이콘을 클릭하면, API 키를 입력할 수 있는 **모달(Modal) 창**이 나타납니다.
3.  **키 저장**: 사용자가 입력 필드에 API 키를 넣고 '확인' 버튼을 누르면, 해당 키가 `localStorage`에 저장됩니다.
4.  **자동 인증**: 이후 서비스 내에서 API를 호출할 때마다, **저장된 키를 가져와 요청 헤더에 자동으로 추가**합니다.
5.  **UI 변경**: 키가 유효하게 저장되면 자물쇠 아이콘이 잠금 해제된 모양(🔓)으로 변경되고, 모든 기능이 활성화됩니다.

## 3. 구현 요구사항

* **컴포넌트**:
    * `AuthButton.js`: 자물쇠 아이콘을 포함한 버튼 컴포넌트. 상태에 따라 아이콘 모양이 변경되어야 합니다.
    * `AuthModal.js`: API 키를 입력받는 모달 컴포넌트. 입력 필드와 확인 버튼을 포함합니다.
* **상태 관리**:
    * `useState`나 `useContext`를 사용하여 API 키의 존재 여부와 모달의 열림/닫힘 상태를 전역적으로 관리합니다.
* **저장소**:
    * `localStorage`를 사용하여 키를 저장하고 가져오는 로직을 구현합니다.
    * 키 저장 및 삭제를 위한 헬퍼 함수를 별도로 분리합니다. (`utils/localStorage.js` 등)
* **API 호출**:
    * 기존 API 호출 로직(`utils/api.js`)을 수정하여, `fetch` 호출 시 `localStorage.getItem('apiKey')`로 키를 가져와 `headers` 객체에 `x-api-key: [키값]` 형태로 추가합니다. 키가 없으면 호출을 진행하지 않습니다.

## 4. UX 및 보안 측면의 장점

* **보안**: 민감한 API 키를 소스코드에 노출시키지 않고 사용자 환경에서 직접 관리함으로써, 보안 위험을 최소화합니다.
* **사용자 경험**:
    * **즉시성**: 회원가입 없이 곧바로 기능을 사용해볼 수 있어 접근성이 높습니다.
    * **직관성**: 자물쇠 아이콘의 시각적 상태 변화를 통해 서비스 이용 가능 여부를 명확하게 전달합니다.
    * **유연성**: 사용자가 자신의 API 키를 사용하여 개인화된 워크플로우를 테스트할 수 있습니다.

---
